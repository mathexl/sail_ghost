#!/usr/bin/env node
'use strict';

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _ = require('./');

var _2 = _interopRequireDefault(_);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

if (process.argv.length < 4) {
    throw new Error('Usage: start <tasks file> <task name>');
}

var tasksPath = _path2.default.resolve(process.argv[2]);
var tasks = require(tasksPath);
var taskName = process.argv[3];

if (!(taskName in tasks)) {
    throw new Error('Can\'t find task "' + taskName + '"');
}

(0, _2.default)(tasks[taskName]).catch(function (error) {
    console.error(error.stack);

    process.exit(1);
});